<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gráfico Interativo de Comentários e Sugestões</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
        }
        #chart-container {
            position: relative;
            margin: auto;
            height: 85vh; /* Aumentado para acomodar mais categorias */
            width: 90vw;
            max-width: 900px;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 700px; 
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal-overlay.visible .modal-content {
            transform: scale(1);
        }
        .action-item {
            border-left: 4px solid #3b82f6;
            padding-left: 1rem;
            margin-bottom: 1.5rem;
        }
        .action-item:last-child {
            margin-bottom: 0;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-5xl bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
        <header class="text-center mb-8">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800">Plano de Ação DPRO 2025</h1>
            <p class="text-md text-gray-600 mt-2">Clique em uma barra para ver as observações e o plano de ação correspondente.</p>
        </header>
        <div id="chart-container">
            <canvas id="complaintsChart"></canvas>
        </div>
    </div>

    <!-- Modal para Observações e Plano de Ação -->
    <div id="detailsModal" class="modal-overlay">
        <div class="modal-content relative">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            <h2 id="modalTitle" class="text-2xl font-bold text-gray-800 mb-6"></h2>
            <div id="modalBody" class="space-y-6">
                <!-- Conteúdo dinâmico aqui -->
            </div>
        </div>
    </div>

    <script>
        // Dados reestruturados para associar cada observação a uma ação específica.
        const data = {
            "Outros": [
                { observation: "Recebimento de serviços no fim de semana com prazo para segunda.", action: "Capacitação de líderes.", prazo: "Até Dezembro/2025" },
                { observation: "Volume de serviço impede acompanhar atividades do Desenvolvimento Profissional.", action: "Garantir tempo protegido para capacitação (ex.: 2h mensais oficiais) - Conforme consultoria PNUD sobre nova forma de Gestão de Desempenho: Alterar Normativo interno + Preparar sistema + pactuação em planos de trabalho + Sensibilização.", prazo: "Até Junho/2026" },
                { observation: "Terceirizados sem férias há quase 4 anos.", action: "Analisar e propor melhorias nos contratos de terceirização, garantindo o cumprimento dos direitos trabalhistas.", prazo: "Até Janeiro/2026" },
                { observation: "Instabilidade de requisitados (emprego público sem segurança).", action: "Analisar e propor melhorias nas condições para requisitados.", prazo: "Até Janeiro/2026" },
                { observation: "Trabalhadores terceirizados sem direito a férias na mudança de contrato.", action: "Analisar e propor melhorias nos contratos de terceirização, garantindo o cumprimento dos direitos trabalhistas.", prazo: "Até Janeiro/2026" },
                { observation: "Área meio sofre com baixa remuneração e condições precárias.", action: "Revisar plano de cargos e salários para a área administrativa.", prazo: "Até Março/2026" },
                { observation: "Plano de saúde inacessível financeiramente.", action: "Estudar viabilidade de novos convênios ou auxílios para planos de saúde.", prazo: "Até Fevereiro/2026" },
            ],
            "Saúde, Qualidade de Vida e Bem-estar no Trabalho": [
                 { observation: "Ergonomia", action: "Realizar diagnóstico das condições de ergonomia, segurança e equipamentos, e elaborar plano de ação com base no diagnóstico.", prazo: "Até Novembro/2025" },
                 { observation: "Sugestão de maior atuação prática.", action: "Realizar diagnóstico das condições de ergonomia, segurança e equipamentos, e elaborar plano de ação com base no diagnóstico.", prazo: "Até Novembro/2025" },
                 { observation: "Ergonomia", action: "Realizar diagnóstico das condições de ergonomia, segurança e equipamentos, e elaborar plano de ação com base no diagnóstico.", prazo: "Até Novembro/2025" },
                 { observation: "Problema de segurança.", action: "Realizar diagnóstico das condições de ergonomia, segurança e equipamentos, e elaborar plano de ação com base no diagnóstico.", prazo: "Até Novembro/2025" },
                 { observation: "Equipamentos de informática", action: "Realizar diagnóstico das condições de ergonomia, segurança e equipamentos, e elaborar plano de ação com base no diagnóstico.", prazo: "Até Novembro/2025" },
            ],
            "Acesso às oportunidades": [
                { observation: "Desestímulo à qualificação.", action: "Mapear e divulgar de forma centralizada todas as oportunidades. Avaliar a viabilidade de estender as campanhas de saúde para outras localidades.", prazo: "Contínuo" },
                { observation: "Falta descentralização.", action: "Mapear e divulgar de forma centralizada todas as oportunidades. Avaliar a viabilidade de estender as campanhas de saúde para outras localidades.", prazo: "Contínuo" },
                { observation: "Falta descentralização.", action: "Mapear e divulgar de forma centralizada todas as oportunidades. Avaliar a viabilidade de estender as campanhas de saúde para outras localidades.", prazo: "Contínuo" },
                { observation: "Terceirizados não têm acesso às capacitações.", action: "Mapear e divulgar de forma centralizada todas as oportunidades. Avaliar a viabilidade de estender as campanhas de saúde para outras localidades.", prazo: "Contínuo" },
                { observation: "Campanhas de vacinação apenas nas capitais.", action: "Mapear e divulgar de forma centralizada todas as oportunidades. Avaliar a viabilidade de estender as campanhas de saúde para outras localidades.", prazo: "Contínuo" },
            ],
            "Falta de conhecimento sobre a Área": [
                { observation: "Falta de divulgação/visibilidade.", action: "Criar um plano de comunicação para divulgar as atribuições, serviços e sucessos da área.", prazo: "Até Outubro/2025" },
                { observation: "Falta de divulgação/visibilidade.", action: "Criar um plano de comunicação para divulgar as atribuições, serviços e sucessos da área.", prazo: "Até Outubro/2025" },
                { observation: "Falta de divulgação/visibilidade.", action: "Criar um plano de comunicação para divulgar as atribuições, serviços e sucessos da área.", prazo: "Até Outubro/2025" },
                { observation: "Falta de divulgação/visibilidade.", action: "Criar um plano de comunicação para divulgar as atribuições, serviços e sucessos da área.", prazo: "Até Outubro/2025" },
            ],
            "Gestão Institucional e Comunicação": [
                { observation: "Proposta de estruturação do atendimento dos serviços", action: "Estruturar o catálogo de serviços da área, definindo canais de atendimento, responsáveis e SLAs.", prazo: "Até Novembro/2025" },
                { observation: "Comunicação deficiente.", action: "Estruturar o catálogo de serviços da área, definindo canais de atendimento, responsáveis e SLAs.", prazo: "Até Novembro/2025" },
                { observation: "Sugestão de maior atuação prática.", action: "Estruturar o catálogo de serviços da área, definindo canais de atendimento, responsáveis e SLAs.", prazo: "Até Novembro/2025" },
            ],
            "Capacitação e Desenvolvimento Profissional": [
                { observation: "Conforto ambiental", action: "Revisar o processo de levantamento de necessidades de capacitação para alinhá-lo às demandas e ao formato preferido pelas equipes.", prazo: "Até Novembro/2025" },
                { observation: "Capacitação sem valor agregado.", action: "Revisar o processo de levantamento de necessidades de capacitação para alinhá-lo às demandas e ao formato preferido pelas equipes.", prazo: "Até Novembro/2025" },
                { observation: "Preferência por interação vivo.", action: "Revisar o processo de levantamento de necessidades de capacitação para alinhá-lo às demandas e ao formato preferido pelas equipes.", prazo: "Até Novembro/2025" },
            ],
            "Sistemas e Processos": [
                 { observation: "Falta de clareza nas opções da plataforma DFT.", action: "Etapa 3 do DFT consiste exatamente em transferir o conhecimento do SISDIP - sistema sob gestão do MGI para todos os órgãos SIPEC. Foi disponibilizado Manual prático, sensibilização, capacitação e plantão de dúvidas. Além disso o acompanhamento do preenchimento dos dados no sistema se estenderá durante todos os meses de 2025. COEPE possui um canal direto com a Equipe do DFT no MGI para sugerir melhorias no sistema (o que já foi feito).", prazo: "Durante todo o ano de 2025" },
                 { observation: "Melhorias no sistema PGD-e (mais gestores, histórico, menos alertas, substituto incluir afastamentos).", action: "O sistema PGD está passando por reformulação geral - será um novo sistema. Entrega: Desenvolvida a API para envio de dados do PGD-AGU ao MGI: Funcionando. Entregas em desenvolvimento (DIGI/SGE): Módulos: Planejamento Estratégico, Cadeia de Valor, PEE, PPI, TCR, Avaliação do PPI, Avaliação do PEE, Relatório de Resultados, API ao MGI. Em homologação: Planejamento Estratégico, Cadeia de Valor, PEE, PPI, TCR, Avaliação do PPI. A desenvolver: Avaliação do PEE.", prazo: "Conclusão em 2026" },
            ],
            "Valorização do Servidor e Carreira": [
                 { observation: "Carreira e progressão: demanda por plano de carreira com valorização da titulação", action: "Realizar estudo para a reestruturação do plano de carreira, incluindo a valorização da titulação.", prazo: "Até Março/2026" },
                 { observation: "Reconhecimento: pedidos por incentivos financeiros, gratificações e estímulos que motivem o servidor a buscar capacitação.", action: "Realizar estudo para a reestruturação do plano de carreira, incluindo a valorização da titulação.", prazo: "Até Março/2026" },
            ],
            "Modalidade de Trabalho": [
                { observation: "POD", action: "Analisar os resultados e feedbacks da modalidade de trabalho (POD) para identificar pontos de melhoria.", prazo: "Até Outubro/2025" }
            ],
            "Ação Não Aplicável": [
                { observation: "Dificuldade para resolver problemas em sistemas de cálculos; suporte ineficiente (Rio e Brasília não resolvem).", action: "Este item foi classificado como não aplicável para ação direta, pois depende de fatores externos. Recomenda-se monitoramento contínuo.", prazo: "N/A" },
                { observation: "Rigor maior na fiscalização de contratos de terceirizados.", action: "Este item foi classificado como não aplicável para ação direta, pois se refere a uma percepção sobre a fiscalização. Recomenda-se comunicação clara sobre os processos.", prazo: "N/A" }
            ]
        };

        const categories = Object.keys(data);
        const counts = categories.map(cat => data[cat].length);

        const ctx = document.getElementById('complaintsChart').getContext('2d');
        const complaintsChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: categories,
                datasets: [{
                    label: 'Nº de Comentários e Sugestões',
                    data: counts,
                    backgroundColor: ['rgba(153, 102, 255, 0.6)','rgba(255, 206, 86, 0.6)','rgba(75, 192, 192, 0.6)','rgba(255, 159, 64, 0.6)','rgba(255, 99, 132, 0.6)','rgba(54, 162, 235, 0.6)', 'rgba(255, 99, 71, 0.6)', 'rgba(60, 179, 113, 0.6)', 'rgba(218, 112, 214, 0.6)', 'rgba(128, 128, 128, 0.6)'],
                    borderColor: ['rgba(153, 102, 255, 1)','rgba(255, 206, 86, 1)','rgba(75, 192, 192, 1)','rgba(255, 159, 64, 1)','rgba(255, 99, 132, 1)','rgba(54, 162, 235, 1)', 'rgba(255, 99, 71, 1)', 'rgba(60, 179, 113, 1)', 'rgba(218, 112, 214, 1)', 'rgba(128, 128, 128, 1)'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: { 
                    x: { beginAtZero: true, title: { display: true, text: 'Número de Ocorrências' } },
                    y: { ticks: { font: { size: 10 } } }
                 },
                plugins: { legend: { display: false } },
                onClick: (event, elements) => {
                    if (elements.length > 0) {
                        const index = elements[0].index;
                        const category = categories[index];
                        openModal(category, data[category]);
                    }
                }
            }
        });
        
        const modal = document.getElementById('detailsModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');

        function openModal(category, items) {
            modalTitle.textContent = category;
            modalBody.innerHTML = ''; // Limpa o conteúdo anterior

            items.forEach(item => {
                const actionText = item.action.replace(/\n/g, '<br>');

                const itemDiv = document.createElement('div');
                itemDiv.className = 'action-item';

                itemDiv.innerHTML = `
                    <p class="text-gray-600 mb-2">${item.observation}</p>
                    <div class="bg-gray-50 p-3 rounded-lg">
                        <p class="text-gray-800 font-semibold"><strong>💡 Plano de Ação:</strong> ${actionText}</p>
                        <p class="text-green-700 font-semibold mt-2"><strong>🕒 Prazo:</strong> ${item.prazo}</p>
                    </div>
                `;
                modalBody.appendChild(itemDiv);
            });
            
            modal.classList.add('visible');
        }

        function closeModal() {
            modal.classList.remove('visible');
        }

        modal.addEventListener('click', (event) => {
            if (event.target === modal) {
                closeModal();
            }
        });
    </script>
</body>
</html>

