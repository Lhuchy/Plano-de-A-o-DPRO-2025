<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrÃ¡fico Interativo de ComentÃ¡rios e SugestÃµes</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
        }
        #chart-container {
            position: relative;
            margin: auto;
            height: 85vh; /* Aumentado para acomodar mais categorias */
            width: 90vw;
            max-width: 900px;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 700px; 
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal-overlay.visible .modal-content {
            transform: scale(1);
        }
        .action-item {
            border-left: 4px solid #3b82f6;
            padding-left: 1rem;
            margin-bottom: 1.5rem;
        }
        .action-item:last-child {
            margin-bottom: 0;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="w-full max-w-5xl bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
        <header class="text-center mb-8">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800">Plano de AÃ§Ã£o DPRO 2025</h1>
            <p class="text-md text-gray-600 mt-2">Clique em uma barra para ver as observaÃ§Ãµes e o plano de aÃ§Ã£o correspondente.</p>
        </header>
        <div id="chart-container">
            <canvas id="complaintsChart"></canvas>
        </div>
    </div>

    <!-- Modal para ObservaÃ§Ãµes e Plano de AÃ§Ã£o -->
    <div id="detailsModal" class="modal-overlay">
        <div class="modal-content relative">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
            <h2 id="modalTitle" class="text-2xl font-bold text-gray-800 mb-6"></h2>
            <div id="modalBody" class="space-y-6">
                <!-- ConteÃºdo dinÃ¢mico aqui -->
            </div>
        </div>
    </div>

    <script>
        // Dados reestruturados para associar cada observaÃ§Ã£o a uma aÃ§Ã£o especÃ­fica.
        const data = {
            "Outros": [
                { observation: "Recebimento de serviÃ§os no fim de semana com prazo para segunda.", action: "CapacitaÃ§Ã£o de lÃ­deres.", prazo: "AtÃ© Dezembro/2025" },
                { observation: "Volume de serviÃ§o impede acompanhar atividades do Desenvolvimento Profissional.", action: "Garantir tempo protegido para capacitaÃ§Ã£o (ex.: 2h mensais oficiais) - Conforme consultoria PNUD sobre nova forma de GestÃ£o de Desempenho: Alterar Normativo interno + Preparar sistema + pactuaÃ§Ã£o em planos de trabalho + SensibilizaÃ§Ã£o.", prazo: "AtÃ© Junho/2026" },
                { observation: "Terceirizados sem fÃ©rias hÃ¡ quase 4 anos.", action: "Analisar e propor melhorias nos contratos de terceirizaÃ§Ã£o, garantindo o cumprimento dos direitos trabalhistas.", prazo: "AtÃ© Janeiro/2026" },
                { observation: "Instabilidade de requisitados (emprego pÃºblico sem seguranÃ§a).", action: "Analisar e propor melhorias nas condiÃ§Ãµes para requisitados.", prazo: "AtÃ© Janeiro/2026" },
                { observation: "Trabalhadores terceirizados sem direito a fÃ©rias na mudanÃ§a de contrato.", action: "Analisar e propor melhorias nos contratos de terceirizaÃ§Ã£o, garantindo o cumprimento dos direitos trabalhistas.", prazo: "AtÃ© Janeiro/2026" },
                { observation: "Ãrea meio sofre com baixa remuneraÃ§Ã£o e condiÃ§Ãµes precÃ¡rias.", action: "Revisar plano de cargos e salÃ¡rios para a Ã¡rea administrativa.", prazo: "AtÃ© MarÃ§o/2026" },
                { observation: "Plano de saÃºde inacessÃ­vel financeiramente.", action: "Estudar viabilidade de novos convÃªnios ou auxÃ­lios para planos de saÃºde.", prazo: "AtÃ© Fevereiro/2026" },
            ],
            "SaÃºde, Qualidade de Vida e Bem-estar no Trabalho": [
                 { observation: "Ergonomia", action: "Realizar diagnÃ³stico das condiÃ§Ãµes de ergonomia, seguranÃ§a e equipamentos, e elaborar plano de aÃ§Ã£o com base no diagnÃ³stico.", prazo: "AtÃ© Novembro/2025" },
                 { observation: "SugestÃ£o de maior atuaÃ§Ã£o prÃ¡tica.", action: "Realizar diagnÃ³stico das condiÃ§Ãµes de ergonomia, seguranÃ§a e equipamentos, e elaborar plano de aÃ§Ã£o com base no diagnÃ³stico.", prazo: "AtÃ© Novembro/2025" },
                 { observation: "Ergonomia", action: "Realizar diagnÃ³stico das condiÃ§Ãµes de ergonomia, seguranÃ§a e equipamentos, e elaborar plano de aÃ§Ã£o com base no diagnÃ³stico.", prazo: "AtÃ© Novembro/2025" },
                 { observation: "Problema de seguranÃ§a.", action: "Realizar diagnÃ³stico das condiÃ§Ãµes de ergonomia, seguranÃ§a e equipamentos, e elaborar plano de aÃ§Ã£o com base no diagnÃ³stico.", prazo: "AtÃ© Novembro/2025" },
                 { observation: "Equipamentos de informÃ¡tica", action: "Realizar diagnÃ³stico das condiÃ§Ãµes de ergonomia, seguranÃ§a e equipamentos, e elaborar plano de aÃ§Ã£o com base no diagnÃ³stico.", prazo: "AtÃ© Novembro/2025" },
            ],
            "Acesso Ã s oportunidades": [
                { observation: "DesestÃ­mulo Ã  qualificaÃ§Ã£o.", action: "Mapear e divulgar de forma centralizada todas as oportunidades. Avaliar a viabilidade de estender as campanhas de saÃºde para outras localidades.", prazo: "ContÃ­nuo" },
                { observation: "Falta descentralizaÃ§Ã£o.", action: "Mapear e divulgar de forma centralizada todas as oportunidades. Avaliar a viabilidade de estender as campanhas de saÃºde para outras localidades.", prazo: "ContÃ­nuo" },
                { observation: "Falta descentralizaÃ§Ã£o.", action: "Mapear e divulgar de forma centralizada todas as oportunidades. Avaliar a viabilidade de estender as campanhas de saÃºde para outras localidades.", prazo: "ContÃ­nuo" },
                { observation: "Terceirizados nÃ£o tÃªm acesso Ã s capacitaÃ§Ãµes.", action: "Mapear e divulgar de forma centralizada todas as oportunidades. Avaliar a viabilidade de estender as campanhas de saÃºde para outras localidades.", prazo: "ContÃ­nuo" },
                { observation: "Campanhas de vacinaÃ§Ã£o apenas nas capitais.", action: "Mapear e divulgar de forma centralizada todas as oportunidades. Avaliar a viabilidade de estender as campanhas de saÃºde para outras localidades.", prazo: "ContÃ­nuo" },
            ],
            "Falta de conhecimento sobre a Ãrea": [
                { observation: "Falta de divulgaÃ§Ã£o/visibilidade.", action: "Criar um plano de comunicaÃ§Ã£o para divulgar as atribuiÃ§Ãµes, serviÃ§os e sucessos da Ã¡rea.", prazo: "AtÃ© Outubro/2025" },
                { observation: "Falta de divulgaÃ§Ã£o/visibilidade.", action: "Criar um plano de comunicaÃ§Ã£o para divulgar as atribuiÃ§Ãµes, serviÃ§os e sucessos da Ã¡rea.", prazo: "AtÃ© Outubro/2025" },
                { observation: "Falta de divulgaÃ§Ã£o/visibilidade.", action: "Criar um plano de comunicaÃ§Ã£o para divulgar as atribuiÃ§Ãµes, serviÃ§os e sucessos da Ã¡rea.", prazo: "AtÃ© Outubro/2025" },
                { observation: "Falta de divulgaÃ§Ã£o/visibilidade.", action: "Criar um plano de comunicaÃ§Ã£o para divulgar as atribuiÃ§Ãµes, serviÃ§os e sucessos da Ã¡rea.", prazo: "AtÃ© Outubro/2025" },
            ],
            "GestÃ£o Institucional e ComunicaÃ§Ã£o": [
                { observation: "Proposta de estruturaÃ§Ã£o do atendimento dos serviÃ§os", action: "Estruturar o catÃ¡logo de serviÃ§os da Ã¡rea, definindo canais de atendimento, responsÃ¡veis e SLAs.", prazo: "AtÃ© Novembro/2025" },
                { observation: "ComunicaÃ§Ã£o deficiente.", action: "Estruturar o catÃ¡logo de serviÃ§os da Ã¡rea, definindo canais de atendimento, responsÃ¡veis e SLAs.", prazo: "AtÃ© Novembro/2025" },
                { observation: "SugestÃ£o de maior atuaÃ§Ã£o prÃ¡tica.", action: "Estruturar o catÃ¡logo de serviÃ§os da Ã¡rea, definindo canais de atendimento, responsÃ¡veis e SLAs.", prazo: "AtÃ© Novembro/2025" },
            ],
            "CapacitaÃ§Ã£o e Desenvolvimento Profissional": [
                { observation: "Conforto ambiental", action: "Revisar o processo de levantamento de necessidades de capacitaÃ§Ã£o para alinhÃ¡-lo Ã s demandas e ao formato preferido pelas equipes.", prazo: "AtÃ© Novembro/2025" },
                { observation: "CapacitaÃ§Ã£o sem valor agregado.", action: "Revisar o processo de levantamento de necessidades de capacitaÃ§Ã£o para alinhÃ¡-lo Ã s demandas e ao formato preferido pelas equipes.", prazo: "AtÃ© Novembro/2025" },
                { observation: "PreferÃªncia por interaÃ§Ã£o vivo.", action: "Revisar o processo de levantamento de necessidades de capacitaÃ§Ã£o para alinhÃ¡-lo Ã s demandas e ao formato preferido pelas equipes.", prazo: "AtÃ© Novembro/2025" },
            ],
            "Sistemas e Processos": [
                 { observation: "Falta de clareza nas opÃ§Ãµes da plataforma DFT.", action: "Etapa 3 do DFT consiste exatamente em transferir o conhecimento do SISDIP - sistema sob gestÃ£o do MGI para todos os Ã³rgÃ£os SIPEC. Foi disponibilizado Manual prÃ¡tico, sensibilizaÃ§Ã£o, capacitaÃ§Ã£o e plantÃ£o de dÃºvidas. AlÃ©m disso o acompanhamento do preenchimento dos dados no sistema se estenderÃ¡ durante todos os meses de 2025. COEPE possui um canal direto com a Equipe do DFT no MGI para sugerir melhorias no sistema (o que jÃ¡ foi feito).", prazo: "Durante todo o ano de 2025" },
                 { observation: "Melhorias no sistema PGD-e (mais gestores, histÃ³rico, menos alertas, substituto incluir afastamentos).", action: "O sistema PGD estÃ¡ passando por reformulaÃ§Ã£o geral - serÃ¡ um novo sistema. Entrega: Desenvolvida a API para envio de dados do PGD-AGU ao MGI: Funcionando. Entregas em desenvolvimento (DIGI/SGE): MÃ³dulos: Planejamento EstratÃ©gico, Cadeia de Valor, PEE, PPI, TCR, AvaliaÃ§Ã£o do PPI, AvaliaÃ§Ã£o do PEE, RelatÃ³rio de Resultados, API ao MGI. Em homologaÃ§Ã£o: Planejamento EstratÃ©gico, Cadeia de Valor, PEE, PPI, TCR, AvaliaÃ§Ã£o do PPI. A desenvolver: AvaliaÃ§Ã£o do PEE.", prazo: "ConclusÃ£o em 2026" },
            ],
            "ValorizaÃ§Ã£o do Servidor e Carreira": [
                 { observation: "Carreira e progressÃ£o: demanda por plano de carreira com valorizaÃ§Ã£o da titulaÃ§Ã£o", action: "Realizar estudo para a reestruturaÃ§Ã£o do plano de carreira, incluindo a valorizaÃ§Ã£o da titulaÃ§Ã£o.", prazo: "AtÃ© MarÃ§o/2026" },
                 { observation: "Reconhecimento: pedidos por incentivos financeiros, gratificaÃ§Ãµes e estÃ­mulos que motivem o servidor a buscar capacitaÃ§Ã£o.", action: "Realizar estudo para a reestruturaÃ§Ã£o do plano de carreira, incluindo a valorizaÃ§Ã£o da titulaÃ§Ã£o.", prazo: "AtÃ© MarÃ§o/2026" },
            ],
            "Modalidade de Trabalho": [
                { observation: "POD", action: "Analisar os resultados e feedbacks da modalidade de trabalho (POD) para identificar pontos de melhoria.", prazo: "AtÃ© Outubro/2025" }
            ],
            "AÃ§Ã£o NÃ£o AplicÃ¡vel": [
                { observation: "Dificuldade para resolver problemas em sistemas de cÃ¡lculos; suporte ineficiente (Rio e BrasÃ­lia nÃ£o resolvem).", action: "Este item foi classificado como nÃ£o aplicÃ¡vel para aÃ§Ã£o direta, pois depende de fatores externos. Recomenda-se monitoramento contÃ­nuo.", prazo: "N/A" },
                { observation: "Rigor maior na fiscalizaÃ§Ã£o de contratos de terceirizados.", action: "Este item foi classificado como nÃ£o aplicÃ¡vel para aÃ§Ã£o direta, pois se refere a uma percepÃ§Ã£o sobre a fiscalizaÃ§Ã£o. Recomenda-se comunicaÃ§Ã£o clara sobre os processos.", prazo: "N/A" }
            ]
        };

        const categories = Object.keys(data);
        const counts = categories.map(cat => data[cat].length);

        const ctx = document.getElementById('complaintsChart').getContext('2d');
        const complaintsChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: categories,
                datasets: [{
                    label: 'NÂº de ComentÃ¡rios e SugestÃµes',
                    data: counts,
                    backgroundColor: ['rgba(153, 102, 255, 0.6)','rgba(255, 206, 86, 0.6)','rgba(75, 192, 192, 0.6)','rgba(255, 159, 64, 0.6)','rgba(255, 99, 132, 0.6)','rgba(54, 162, 235, 0.6)', 'rgba(255, 99, 71, 0.6)', 'rgba(60, 179, 113, 0.6)', 'rgba(218, 112, 214, 0.6)', 'rgba(128, 128, 128, 0.6)'],
                    borderColor: ['rgba(153, 102, 255, 1)','rgba(255, 206, 86, 1)','rgba(75, 192, 192, 1)','rgba(255, 159, 64, 1)','rgba(255, 99, 132, 1)','rgba(54, 162, 235, 1)', 'rgba(255, 99, 71, 1)', 'rgba(60, 179, 113, 1)', 'rgba(218, 112, 214, 1)', 'rgba(128, 128, 128, 1)'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: { 
                    x: { beginAtZero: true, title: { display: true, text: 'NÃºmero de OcorrÃªncias' } },
                    y: { ticks: { font: { size: 10 } } }
                 },
                plugins: { legend: { display: false } },
                onClick: (event, elements) => {
                    if (elements.length > 0) {
                        const index = elements[0].index;
                        const category = categories[index];
                        openModal(category, data[category]);
                    }
                }
            }
        });
        
        const modal = document.getElementById('detailsModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');

        function openModal(category, items) {
            modalTitle.textContent = category;
            modalBody.innerHTML = ''; // Limpa o conteÃºdo anterior

            items.forEach(item => {
                const actionText = item.action.replace(/\n/g, '<br>');

                const itemDiv = document.createElement('div');
                itemDiv.className = 'action-item';

                itemDiv.innerHTML = `
                    <p class="text-gray-600 mb-2">${item.observation}</p>
                    <div class="bg-gray-50 p-3 rounded-lg">
                        <p class="text-gray-800 font-semibold"><strong>ðŸ’¡ Plano de AÃ§Ã£o:</strong> ${actionText}</p>
                        <p class="text-green-700 font-semibold mt-2"><strong>ðŸ•’ Prazo:</strong> ${item.prazo}</p>
                    </div>
                `;
                modalBody.appendChild(itemDiv);
            });
            
            modal.classList.add('visible');
        }

        function closeModal() {
            modal.classList.remove('visible');
        }

        modal.addEventListener('click', (event) => {
            if (event.target === modal) {
                closeModal();
            }
        });
    </script>
</body>
</html>

